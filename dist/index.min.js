!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):t.ATAmbient=i()}(this,function(){"use strict";!function(t,i){void 0===i&&(i={});var e=i.insertAt;if(t&&"undefined"!=typeof document){var s=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===e&&s.firstChild?s.insertBefore(n,s.firstChild):s.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}}('@charset "UTF-8";\n/* 自定义样式 */\n.o2team_ambient_main {\n  z-index: 999;\n  pointer-events: none;\n  width: 100%;\n  height: 100%; }\n');var t="confetti",i=t.toUpperCase(),e="O2_AMBIENT_".concat(i,"_MAIN"),s="O2_AMBIENT_".concat(i,"_INIT"),n="O2_AMBIENT_".concat(i,"_CONFIG"),o="o2_ambient_".concat(t);!function(){for(var o=0,t=["ms","moz","webkit","o"],i=0;i<t.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window["".concat(t[i],"RequestAnimationFrame")],window.cancelAnimationFrame=window["".concat(t[i],"CancelAnimationFrame")]||window["".concat(t[i],"CancelRequestAnimationFrame")];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,i){var e=(new Date).getTime(),s=Math.max(0,16-(e-o)),n=window.setTimeout(function(){t(e+s)},s);return o=e+s,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();var p=function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")};function h(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var a=function(t,i,e){return i&&h(t.prototype,i),e&&h(t,e),t};window.devicePixelRatio,Math.PI;var r=Math.sqrt;function u(t,i){this.x=t,this.y=i,this.Length=function(){return r(this.SqrLength())},this.SqrLength=function(){return this.x*this.x+this.y*this.y},this.Add=function(t){this.x+=t.x,this.y+=t.y},this.Sub=function(t){this.x-=t.x,this.y-=t.y},this.Div=function(t){this.x/=t,this.y/=t},this.Mul=function(t){this.x*=t,this.y*=t},this.Normalize=function(){var t=this.SqrLength();if(0!=t){var i=1/r(t);this.x*=i,this.y*=i}},this.Normalized=function(){var t=this.SqrLength();if(0==t)return new u(0,0);var i=1/r(t);return new u(this.x*i,this.y*i)}}u.Lerp=function(t,i,e){return new u((i.x-t.x)*e+t.x,(i.y-t.y)*e+t.y)},u.Distance=function(t,i){return r(u.SqrDistance(t,i))},u.SqrDistance=function(t,i){var e=t.x-i.x,s=t.y-i.y;return e*e+s*s+z*z},u.Scale=function(t,i){return new u(t.x*i.x,t.y*i.y)},u.Min=function(t,i){return new u(Math.min(t.x,i.x),Math.min(t.y,i.y))},u.Max=function(t,i){return new u(Math.max(t.x,i.x),Math.max(t.y,i.y))},u.ClampMagnitude=function(t,i){var e=t.Normalized;return new u(e.x*i,e.y*i)},u.Sub=function(t,i){return new u(t.x-i.x,t.y-i.y,t.z-i.z)};var d=function(){function n(t,i,e,s){p(this,n),this.position=new u(t,i),this.mass=e,this.drag=s,this.force=new u(0,0),this.velocity=new u(0,0)}return a(n,[{key:"AddForce",value:function(t){this.force.Add(t)}},{key:"Integrate",value:function(t){var i=this.CurrentForce(this.position);i.Div(this.mass);var e=new u(this.velocity.x,this.velocity.y);e.Mul(t),this.position.Add(e),i.Mul(t),this.velocity.Add(i),this.force=new u(0,0)}},{key:"CurrentForce",value:function(t,i){var e=new u(this.force.x,this.force.y),s=this.velocity.Length(),n=new u(this.velocity.x,this.velocity.y);return n.Mul(this.drag*this.mass*s),e.Sub(n),e}}]),n}(),c=window.devicePixelRatio,l=Math.PI,f=Math.sqrt,y=Math.round,w=Math.random,v=Math.cos,m=Math.sin,x=l/180,b=[["#df0049","#660671"],["#00e857","#005291"],["#2bebbc","#05798a"],["#ffd200","#b06c00"]],g=function(){function l(t,i,e,s,n,o,h,a){p(this,l),this.bounds=new u(0,0),this.particleDist=s,this.particleCount=e,this.particleMass=h,this.particleDrag=a;var r=y(w()*(b.length-1));this.frontColor=b[r][0],this.backColor=b[r][1],this.xOff=v(x*o)*n,this.yOff=m(x*o)*n,this.position=new u(t,i),this.prevPosition=new u(t,i),this.velocityInherit=2*w()+4,this.time=100*w(),this.oscillationSpeed=2*w()+2,this.oscillationDistance=40*w()+40,this.ySpeed=40*w()+80,this.particles=new Array;for(var c=0;c<this.particleCount;c++)this.particles[c]=new d(t,i-c*this.particleDist,this.particleMass,this.particleDrag)}return a(l,[{key:"Update",value:function(t){var i=0;this.time+=t*this.oscillationSpeed,this.position.y+=this.ySpeed*t,this.position.x+=v(this.time)*this.oscillationDistance*t,this.particles[0].position=this.position;var e=this.prevPosition.x-this.position.x,s=this.prevPosition.y-this.position.y,n=f(e*e+s*s);for(this.prevPosition=new u(this.position.x,this.position.y),i=1;i<this.particleCount;i++){var o=u.Sub(this.particles[i-1].position,this.particles[i].position);o.Normalize(),o.Mul(n/t*this.velocityInherit),this.particles[i].AddForce(o)}for(i=1;i<this.particleCount;i++)this.particles[i].Integrate(t);for(i=1;i<this.particleCount;i++){var h=new u(this.particles[i].position.x,this.particles[i].position.y);h.Sub(this.particles[i-1].position),h.Normalize(),h.Mul(this.particleDist),h.Add(this.particles[i-1].position),this.particles[i].position=h}this.position.y>l.bounds.y+this.particleDist*this.particleCount&&this.Reset()}},{key:"Reset",value:function(){this.position.y=-w()*l.bounds.y,this.position.x=w()*l.bounds.x,this.prevPosition=new u(this.position.x,this.position.y),this.velocityInherit=2*w()+4,this.time=100*w(),this.oscillationSpeed=2*w()+1.5,this.oscillationDistance=40*w()+40,this.ySpeed=40*w()+80;var t=y(w()*(b.length-1));this.frontColor=b[t][0],this.backColor=b[t][1],this.particles=new Array;for(var i=0;i<this.particleCount;i++)this.particles[i]=new d(this.position.x,this.position.y-i*this.particleDist,this.particleMass,this.particleDrag)}},{key:"Draw",value:function(t){for(var i=0;i<this.particleCount-1;i++){var e=new u(this.particles[i].position.x+this.xOff,this.particles[i].position.y+this.yOff),s=new u(this.particles[i+1].position.x+this.xOff,this.particles[i+1].position.y+this.yOff);this.Side(this.particles[i].position.x,this.particles[i].position.y,this.particles[i+1].position.x,this.particles[i+1].position.y,s.x,s.y)<0?(t.fillStyle=this.frontColor,t.strokeStyle=this.frontColor):(t.fillStyle=this.backColor,t.strokeStyle=this.backColor),0==i?(t.beginPath(),t.moveTo(this.particles[i].position.x*c,this.particles[i].position.y*c),t.lineTo(this.particles[i+1].position.x*c,this.particles[i+1].position.y*c),t.lineTo(.5*(this.particles[i+1].position.x+s.x)*c,.5*(this.particles[i+1].position.y+s.y)*c),t.closePath(),t.stroke(),t.fill(),t.beginPath(),t.moveTo(s.x*c,s.y*c),t.lineTo(e.x*c,e.y*c),t.lineTo(.5*(this.particles[i+1].position.x+s.x)*c,.5*(this.particles[i+1].position.y+s.y)*c)):i==this.particleCount-2?(t.beginPath(),t.moveTo(this.particles[i].position.x*c,this.particles[i].position.y*c),t.lineTo(this.particles[i+1].position.x*c,this.particles[i+1].position.y*c),t.lineTo(.5*(this.particles[i].position.x+e.x)*c,.5*(this.particles[i].position.y+e.y)*c),t.closePath(),t.stroke(),t.fill(),t.beginPath(),t.moveTo(s.x*c,s.y*c),t.lineTo(e.x*c,e.y*c),t.lineTo(.5*(this.particles[i].position.x+e.x)*c,.5*(this.particles[i].position.y+e.y)*c)):(t.beginPath(),t.moveTo(this.particles[i].position.x*c,this.particles[i].position.y*c),t.lineTo(this.particles[i+1].position.x*c,this.particles[i+1].position.y*c),t.lineTo(s.x*c,s.y*c),t.lineTo(e.x*c,e.y*c)),t.closePath(),t.stroke(),t.fill()}}},{key:"Side",value:function(t,i,e,s,n,o){return(t-e)*(o-s)-(i-s)*(n-e)}}]),l}(),C=window.devicePixelRatio,P=Math.PI,S=Math.round,A=Math.random,M=Math.cos,k=Math.sin,T=P/180,_=[["#df0049","#660671"],["#00e857","#005291"],["#2bebbc","#05798a"],["#ffd200","#b06c00"]],R=function(){function h(t,i){p(this,h),this.pos=new u(t,i),this.rotationSpeed=600*A()+800,this.angle=T*A()*360,this.rotation=T*A()*360,this.cosA=1,this.size=5,this.oscillationSpeed=1.5*A()+.5,this.xSpeed=40,this.ySpeed=60*A()+50,this.corners=new Array,this.time=A();var e=S(A()*(_.length-1));this.frontColor=_[e][0],this.backColor=_[e][1];for(var s=0;s<4;s++){var n=M(this.angle+T*(90*s+45)),o=k(this.angle+T*(90*s+45));this.corners[s]=new u(n,o)}this.bounds=new u(0,0)}return a(h,[{key:"Update",value:function(t){this.time+=t,this.rotation+=this.rotationSpeed*t,this.cosA=M(T*this.rotation),this.pos.x+=M(this.time*this.oscillationSpeed)*this.xSpeed*t,this.pos.y+=this.ySpeed*t,this.pos.y>h.bounds.y&&(this.pos.x=A()*h.bounds.x,this.pos.y=0)}},{key:"Draw",value:function(t){0<this.cosA?t.fillStyle=this.frontColor:t.fillStyle=this.backColor,t.beginPath(),t.moveTo((this.pos.x+this.corners[0].x*this.size)*C,(this.pos.y+this.corners[0].y*this.size*this.cosA)*C);for(var i=1;i<4;i++)t.lineTo((this.pos.x+this.corners[i].x*this.size)*C,(this.pos.y+this.corners[i].y*this.size*this.cosA)*C);t.closePath(),t.fill()}}]),h}(),D=Math.random,F=window.requestAnimationFrame,q=window.cancelAnimationFrame||window.cancelRequestAnimationFrame,E=function(){function t(){p(this,t),this.devicePixelRatio=function(){var t=1;return window.devicePixelRatio&&(t=2<=window.devicePixelRatio?2:1),t}(),this.width=window.innerWidth*this.devicePixelRatio,this.height=window.innerHeight*this.devicePixelRatio,this.parent=document.body,this.FPS=30,this.className=o,this.isPaused=!1,this.setConfig(),this.bindEvents(),this.initDOM(),this.initConfig(),this.play()}return a(t,[{key:"setConfig",value:function(){var t=window[n];this._config={confettiRibbon:t.confettiRibbon,confettiPaperCount:t.confettiPaperCount,duration:1/t.speed}}},{key:"initDOM",value:function(){var t=document.querySelector(".o2team_ambient_main").querySelector("canvas");console.log(t);var i=this.devicePixelRatio;t.style.position="fixed",t.style.left="0",t.style.top="0",t.style.width="".concat(this.width/i,"px"),t.style.height="".concat(this.height/i,"px"),t.style.zIndex=2,t.style.pointerEvents="none",t.className=this.className,t.width=this.width,t.height=this.height,this.canvas=t,this.ctx=t.getContext("2d")}},{key:"bindEvents",value:function(){this.resizeSelf=this.windowResizeHandle.bind(this),window.addEventListener("resize",this.resizeSelf,!1)}},{key:"unbindEvents",value:function(){window.removeEventListener("resize",this.resizeSelf,!1)}},{key:"windowResizeHandle",value:function(t){var i=this.devicePixelRatio;this.width=window.innerWidth*i,this.height=window.innerHeight*i,this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.width="".concat(this.width/i,"px"),this.canvas.style.height="".concat(this.height/i,"px"),R.bounds=new u(this.width,this.height),g.bounds=new u(this.width,this.height)}},{key:"pause",value:function(){this.isPaused=!0}},{key:"toggle",value:function(){this.isPaused?this.play():this.stop()}},{key:"play",value:function(){this.isPaused=!1,this.update()}},{key:"initConfig",value:function(){this.confettiRibbons=[],g.bounds=new u(this.width,this.height);for(var t=0;t<this._config.confettiRibbon;t++)this.confettiRibbons[t]=new g(D()*this.width,-D()*this.height*2,30,8,8,45,1,.05);this.confettiPapers=[],R.bounds=new u(this.width,this.height);for(var i=0;i<this._config.confettiPaperCount;i++)this.confettiPapers[i]=new R(D()*this.width,D()*this.height)}},{key:"reset",value:function(){this.setConfig(),this.stop(),this.initConfig(),this.play()}},{key:"stop",value:function(){q(this.interval),this.pause()}},{key:"update",value:function(){var t=this;this.ctx.clearRect(0,0,this.width,this.height);for(var i=0;i<this._config.confettiPaperCount;i++)this.confettiPapers[i].Update(this._config.duration),this.confettiPapers[i].Draw(this.ctx);for(var e=0;e<this._config.confettiRibbon;e++)this.confettiRibbons[e].Update(this._config.duration),this.confettiRibbons[e].Draw(this.ctx);this.interval=F(function(){t.isPaused||t.update()})}}]),t}(),I=document.querySelector(".o2team_ambient_main");function N(){window[n];window[e]=new E}return I||((I=document.createElement("div")).setAttribute("class","o2team_ambient_main"),I.setAttribute("id","o2team_ambient_main"),I.insertAdjacentElement("beforeend",document.createElement("canvas")),document.body.insertAdjacentElement("beforeend",I)),I.addEventListener("click",function(){I.style.display="none"}),window[s]=N,window[n]={speed:50,confettiRibbon:11,confettiPaperCount:95},function(i){i&&Object.keys(window[n]).forEach(function(t){void 0!==i[t]&&(window[n][t]=i[t])}),N()}});
//# sourceMappingURL=index.min.js.map
